NETCONF                                                   Authorship TBD
Internet-Draft               ***PRE-DRAFT - Not submitted to IETF Yet***       
Intended status: Standards Track                                
Expires: March 10, 2018                                           
                                                       September 6, 2017


                YANG Notifications Protocol Architecture
    draft-voit-yang-subscriptions-and-notifications-architecture-00

Abstract

   Provides an introductory context for NETCONF WG drafts on YANG
   subscriptions and notifications.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on March 10, 2018.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.





Voit & Clemm             Expires March 10, 2018                 [Page 1]

Internet-Draft                    Arch                    September 2017


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Included drafts . . . . . . . . . . . . . . . . . . . . .   2
     1.2.  Phasing of drafts . . . . . . . . . . . . . . . . . . . .   3
   2.  Scope of Drafts . . . . . . . . . . . . . . . . . . . . . . .   4
     2.1.  draft-ietf-netconf-subscribed-notifications . . . . . . .   4
     2.2.  draft-ietf-netconf-yang-push  . . . . . . . . . . . . . .   5
     2.3.  draft-ietf-netconf-netconf-event-notifications  . . . . .   5
     2.4.  draft-ietf-netconf-restconf-notif . . . . . . . . . . . .   5
     2.5.  draft-voit-yang-notification-messages . . . . . . . . . .   6
     2.6.  Additional drafts . . . . . . . . . . . . . . . . . . . .   6
   3.  Relationships between Drafts  . . . . . . . . . . . . . . . .   6
     3.1.  Relationship 1  . . . . . . . . . . . . . . . . . . . . .   7
     3.2.  Relationship 2  . . . . . . . . . . . . . . . . . . . . .   7
     3.3.  Relationship 3  . . . . . . . . . . . . . . . . . . . . .   8
     3.4.  Relationship 4  . . . . . . . . . . . . . . . . . . . . .   8
     3.5.  Relationship 5  . . . . . . . . . . . . . . . . . . . . .   8
     3.6.  Additional Relationships  . . . . . . . . . . . . . . . .   8
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   9
   5.  Informative References  . . . . . . . . . . . . . . . . . . .   9
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  10

1.  Introduction

1.1.  Included drafts

   This document is to provide a new reader an introductory context to
   the drafts NETCONF drafts aimed at yang-push, subscriptions, and
   event notifications:

   o  [sn] - draft-ietf-netconf-subscribed-notifications

   o  [yp] - draft-ietf-netconf-yang-push

   o  [nn] - draft-ietf-netconf-netconf-event-notifications

   o  [rn] - draft-ietf-netconf-restconf-notif

   o  [ynm] - draft-voit-netconf-notification-messages

   o  (additional drafts from author scoping efforts currently underway)

   The scope and contents of each of these drafts is contained within
   Section 2






Voit & Clemm             Expires March 10, 2018                 [Page 2]

Internet-Draft                    Arch                    September 2017


1.2.  Phasing of drafts

   To understand why the YANG subscriptions and notifications work is
   phased, it is worth looking back at how the set of work in NETCONF
   progressed...

   o  network subscription requirements [RFC7923] drove yang-push

   o  ..which the NETCONF WG requested be generalized to cover the
      [RFC5277] event-notification control plane

   o  ..which then needed to cover the [RFC5277] event-notification data
      plane, as the NETCONF notification namespace didn't include the
      needed headers.

   o  ..which then exposed a need an update [RFC7950] and [RFC8040] as
      general notification also needs to support common and extensible
      message headers.

   This set of drivers has three main themes:

   1.  an evolved subscription control plane paired, which when paired
       with the existing 5277 encoded data plane Notification 1.0
       provides a solution for yang push.

   2.  a data plane for next generation YANG 2.0 notifications that can
       provide robustness, flexibility, and extensibility for YANG
       notification message telemetry.

   3.  technology improvements from initial set of NETCONF adopted
       drafts

   For theme 1, drafts [sn], [yp], [nn], and [rn] provide solutions for
   an evolved subscription control plane, pushing of yang datastore
   changes as they happen, and periodic reporting of yang datastore
   state.  Also enabled is the use of the evolved subscription control
   plane on publisher based event streams.

   For theme 2, solutions are in the early stages for:

   o  automatic determination of which common headers to use, and
      selection of if/what transport bundling to use without requiring
      any change to YANG's 'notification' statement

   o  continuing, transparent support for [RFC5277] encoded
      notifications from legacy clients





Voit & Clemm             Expires March 10, 2018                 [Page 3]

Internet-Draft                    Arch                    September 2017


   o  general strategy to introduce new behavior where a server
      advertises support for new headers and encodings, and client
      selects them when available

   These items are listed so they are explicitly shown not be covered by
   Theme 1.

2.  Scope of Drafts

   This section describes the intent and contents of each draft
   comprising the subscriptions and YANG notifications technologies.

2.1.  draft-ietf-netconf-subscribed-notifications

   This document defines capabilities and operations for the customized
   establishment of subscriptions upon a publisher's event streams.
   Also defined are delivery mechanisms for instances of the resulting
   events.  Effectively this allows a subscriber to request and receive
   a continuous, custom influx of publisher generated information.
   Included are:

   o  Dynamic and configured subscriptions

   o  Multiple subscriptions / transport

   o  Multiple configured receivers

   o  Establish, modify, delete, kill RPC

   o  State change notifications

   o  Suspend/resume

   o  Filtering full notifications

   o  Stream discovery

   o  Replay (and start time negotiation)

   o  Prioritization

   o  Monitoring / reporting

   o  QoS

   o  Error responses





Voit & Clemm             Expires March 10, 2018                 [Page 4]

Internet-Draft                    Arch                    September 2017


2.2.  draft-ietf-netconf-yang-push

   This document provides mechanisms to enable rapid visibility into
   changes made on YANG configuration and operational objects enables
   new capabilities such as remote mirroring of configuration and
   operational state.  With this, subscriber applications may request a
   continuous, customized stream of updates from a YANG datastore.
   Included are:

   o  Datastore on-change and periodic triggers

   o  Selecting objects within a datastore

   o  Authorization model per object

   o  RPC for datastore resynchronization

   o  Sending of full YANG trees or yang-patch

   o  Tagging of partial updates

   o  Tagging of on-change object support

   o  Negotiation of filters and period lengths

   o  Datastore specific error responses

2.3.  draft-ietf-netconf-netconf-event-notifications

   This document defines how to transport network subscriptions and
   event messages on top of the Network Configuration protocol
   (NETCONF).  This includes the full set of RPCs, subscription state
   changes, and message payloads needing asynchronous delivery.
   Included are:

   o  Transport mapping for subscription control plane

   o  Transport mapping for 5277 event transport

2.4.  draft-ietf-netconf-restconf-notif

   This document defines Restconf, HTTP2, and HTTP1.1 bindings for the
   transport of Subscription requests and corresponding push updates.
   Being subscribed may be either publisher defined event streams or
   nodes/subtrees of YANG Datastores.  Included are:

   o  Transport mapping for subscription control plane




Voit & Clemm             Expires March 10, 2018                 [Page 5]

Internet-Draft                    Arch                    September 2017


   o  Transport mapping for 5277 event transport

   o  Transport mappings (including HTTP2 QoS)

   o  Heartbeats and clean-up

2.5.  draft-voit-yang-notification-messages

   This document specifies transport independent capabilities for yang
   notification messages and their encoding.  This would be applicable
   for YANG notifications, this includes but is not limited to the
   encapsulation and transport of event notifications and YANG datastore
   update records.  Included are:

   o  a new yang notification 2.0 data plane element which replaces the
      encapsulation schema and namespace from RFC 5277

   o  a set of common, transport agnostic message header objects to
      support functionality such as event severity, message signing,
      message loss discovery, message de-duplication, originating
      process identification.

   o  how to bundle multiple event records into a single notification
      message.

   This draft is not yet adopted by the NETCONF WG.

2.6.  Additional drafts

   As we agree on the scope of new drafts, they can be entered here...

3.  Relationships between Drafts

   This section describes the interdependencies between subscription
   drafts.
















Voit & Clemm             Expires March 10, 2018                 [Page 6]

Internet-Draft                    Arch                    September 2017


            yang-push
                 |
                 1
                 v
      subscribed-notifications
            ^            ^
            2            3
            |            |
    restconf-notif   netconf-event-notifications
               |       |
               4       5
               v       v
       yang-notification-messages


                  Figure 1: Interdependies between drafts

   A few notes on the figure above.  The initial of text leading text of
   each name has been removed to make the figure more readable.
   Numbered arrows indicate a dependency of one draft upon another.  The
   nature of each arrow is described below.

3.1.  Relationship 1

   The draft [sn] provides the techical foundation upon which YANG
   datastore specific push mechanisms are layered as specified in [yp].
   Key here are:

   o  replacement of event streams with on-change or periodic triggers
      upon a YANG Datastore.

   o  replacement of event filters with datastore selectors

3.2.  Relationship 2

   The [nn] draft supports [sn] by defining NETCONF transport specifics.
   Key are:

   o  bindings for RPC communications

   o  event notifications over NETCONF encoded examples using a 5277
      data plane object.

   There is nothing specific to [yp] which needs to be differentiated in
   this relationship.






Voit & Clemm             Expires March 10, 2018                 [Page 7]

Internet-Draft                    Arch                    September 2017


3.3.  Relationship 3

   The [rn] draft supports [sn] by defining transport specific guidance
   where some form of HTTP is used underneath.  Key here are:

   o  bindings for RPC communications over RESTCONF

   o  bindings for 5277 encoded notifications transported over HTTP2 and
      HTTP1.1

   o  end-to-end deployment guidance for Call Home and TLS Heartbeat

   There is nothing specific to [yp] which needs to be differentiated in
   this relationship.

3.4.  Relationship 4

   The [nn] draft will not initially have available an Notifications 2.0
   replacement of 5277 yang notification encoding scheme which can
   support common headers such as subscription-id.  Niether will
   bundling of notifications be initially supported.

   When [ynm] becomes available, it will be possible to replace the 5277
   event Notification 1.0 encoding, with example 2.0 for NETCONF.  A
   future determination will need to be made as to whether a separate
   informational draft showing a properly formatted NETCONF data plane
   message will be needed.

3.5.  Relationship 5

   The [rn] draft will not initially have available an Notifications 2.0
   replacement of 5277 yang notification encoding scheme which can
   support common headers such as subscription-id.  Niether will
   bundling of notifications be initially supported.

   When [ynm] becomes available, it will be possible to replace the 5277
   event Notification 1.0 encoding, with example 2.0 encodings for
   HTTP2.  A future determination will need to be made as to whether a
   separate informational draft showing a properly formatted data plane
   message will be needed.

3.6.  Additional Relationships

   As agreed upon within author scoping efforts.







Voit & Clemm             Expires March 10, 2018                 [Page 8]

Internet-Draft                    Arch                    September 2017


4.  Security Considerations

   Are addressed within each draft.

5.  Informative References

   [nn]       Gonzalez Prieto, A., Clemm, A., Voit, E., Nilsen-Nygaard,
              E., and A. Tripathy, "NETCONF Support for Event
              Notifications", July 2017.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5277]  Chisholm, S. and H. Trevino, "NETCONF Event
              Notifications", RFC 5277, DOI 10.17487/RFC5277, July 2008,
              <https://www.rfc-editor.org/info/rfc5277>.

   [RFC7923]  Voit, E., Clemm, A., and A. Gonzalez Prieto, "Requirements
              for Subscription to YANG Datastores", RFC 7923,
              DOI 10.17487/RFC7923, June 2016,
              <https://www.rfc-editor.org/info/rfc7923>.

   [RFC7950]  Bjorklund, M., Ed., "The YANG 1.1 Data Modeling Language",
              RFC 7950, DOI 10.17487/RFC7950, August 2016,
              <https://www.rfc-editor.org/info/rfc7950>.

   [RFC8040]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", RFC 8040, DOI 10.17487/RFC8040, January 2017,
              <https://www.rfc-editor.org/info/rfc8040>.

   [rn]       Voit, E., Gonzalez Prieto, A., Tripathy, A., Nilsen-
              Nygaard, E., Clemm, A., and A. Bierman, "Restconf and HTTP
              Transport for Event Notifications", August 2017.

   [sn]       Voit, E., Clemm, A., Gonzalez Prieto, A., Prasad Tripathy,
              A., and E. Nilsen-Nygaard, "Custom Subscription to Event
              Notifications", September 2017,
              <https://datatracker.ietf.org/doc/
              draft-ietf-netconf-subscribed-notifications/>.

   [ynm]      Voit, E., Bierman, A., Clemm, A., and T. Jenkins, "YANG
              Notification Headers and Bundles", July 2017.







Voit & Clemm             Expires March 10, 2018                 [Page 9]

Internet-Draft                    Arch                    September 2017


   [yp]       Clemm, A., Voit, E., Gonzalez Prieto, A., Prasad Tripathy,
              A., Nilsen-Nygaard, E., Bierman, A., and B. Lengyel,
              "Subscribing to YANG datastore push updates", September
              2017, <https://datatracker.ietf.org/doc/
              draft-ietf-netconf-yang-push/>.

Authors' Addresses

   Eric Voit
   Cisco Systems

   Email: evoit@cisco.com


   Alexander Clemm
   Huawei

   Email: ludwig@clemm.org

































Voit & Clemm             Expires March 10, 2018                [Page 10]